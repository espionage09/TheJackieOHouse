var _i_=this._i_||function(){},_r_=this._r_||function(e){return e},_sp_=this._sp_||function(e){B.et.customGoal("cDPPESHbfNFVTAYZSQDZET",1),B.reportError({message:"SPDR function called - "+e},"SPDR")};_i_("a9a:0788b4b3"),B.define("hotel/utils/rooms-selected-copy",function(e){return _i_("a9a:be6dbbf5"),_r_(function(e,t){_i_("a9a:9863e5ee");var o,a="<strong>"+t+"</strong>";switch(1<e.length?"0":e[0]||"0"){case"29":o="hp_book_now_summary_holidayhomes";break;case"31":o="hp_book_now_summary_villas";break;case"1":o="hp_book_now_summary_apartments";break;case"17":o="hp_book_now_summary_chalet";break;case"19":o="hp_book_now_summary_bungalow";break;case"26":o="hp_book_now_summary_dorm_beds"}return _r_(o?B.jstmpl.translations(o,t,{b_count:a}):B.jstmpl.translations("hp_book_now_summary_room",t,{number_rooms:a}))})}),B.define("component/hotel/new-rooms-table/cheapest-seen-block",function(e,t,o){_i_("a9a:fa26493f");var n=e("jquery"),a=e("component"),r=B.require("search-config");function _(o,e){if(_i_("a9a:b43661b8"),r.isGroupSearch)return _r_();var t=[B.env.b_ufi,B.env.b_checkin_date,B.env.b_checkout_date,+r.adults].join("_"),a={method:"GET",dataType:"json",url:"/is_cheapest",data:{hotel_id:B.env.b_hotel_id,search_key:t}};n.ajax(a).done(function(e){var t;_i_("a9a:73b2ad0f"),!e.b_first&&e.is_the_cheapest?((t=o.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),o.addClass("hprt-table-cheapest-block-banner-active"),o.closest("tr.js-hprt-cheapest-block-row").addClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.addClass("hprt-table-cheapest-block-active")):((t=o.closest("tr").prev()).find(".hprt-table-cell-price").removeClass("hprt-table-cheapest-block-arrow"),o.removeClass("hprt-table-cheapest-block-banner-active"),o.closest("tr.js-hprt-cheapest-block-row").removeClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.removeClass("hprt-table-cheapest-block-active")),_r_()}),_r_()}o.exports=a.extend({init:function(){_i_("a9a:53f49709");var e=this.$el;_(e),n(window).bind("focus",function(){_i_("a9a:fb03e730"),_(e),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/room-upgrade-for-genius-block",function(e,t,o){_i_("a9a:80e13554");var a=e("component");o.exports=a.extend({init:function(){_i_("a9a:f2ca0def");var e,t,o=this.$el;e=o,_i_("a9a:0cec8fd3"),(t=e.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),t.find(".hprt-table-cell").not($(".hprt-table-cell-roomtype")).addClass("hprt-remove-top-border"),t.hasClass("hprt-table-last-row")&&e.addClass("rm-upgrd-block-border"),_r_(),o.closest("tr").prev().removeClass("hprt-table-cheapest-block"),o.closest("tr").prev().find(".hprt-table-cell-roomtype.-first").not($(".-last")).removeClass("droom_seperator"),$(".room-upgrade-row").find("td").removeClass("droom_seperator");var a=$(".room-upgrade-row");a.next().hasClass("js-hprt-room-upgrade-block-row")&&a.find("td").css("border-bottom","0"),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/lightbox",function(e,t,o){_i_("a9a:9880e235");var a=e("component"),u=e("et"),g=e("jquery"),v=e("lightbox"),k=e("events"),y=B.require("ga-tracker"),x=e("hotel/rooms_table/lightbox/gallery"),i=e("querystring"),n={},r=0,w=!1,_=!1,s=!1,l=!1;function j(e){if(_i_("a9a:fdaa627b"),(!_||!s||!l)&&e.data("room-id")){var t="RD"+e.data("room-id");n[t]?n[t]+=1:(n[t]=1,r+=1,_||(u.goal("hp_rt_roomtype_lightbox_opened"),_=!0)),!s&&1<n[t]&&(u.goal("hp_lightbox_opened_more_than_once"),s=!0),!l&&1<r&&(u.goal("hp_lightbox_opened_for_different_rooms"),l=!0)}_r_()}function C(a){return _i_("a9a:c8c5a058"),_r_(function(){_i_("a9a:c3814b3f");var e=a.data("room-id"),t=g("[name=RD"+e+"]").parents(".hprt-table-cell").first();if(!B.feature||!B.feature.transition||!B.env.b_has_maxotel_rooms)return _r_();if(!t.length)return _r_();!function(e){_i_("a9a:1761391a");var t="hprt-table-cell-roomtype--highlight";e.addClass(t),setTimeout(function(){_i_("a9a:7604d58c"),e.removeClass(t),_r_()},500),_r_()}(t),function(e){_i_("a9a:bf855915");var t="roomType--highlight hprt-table-cell-roomtype--active";g(".hprt-table").find(".hprt-table-cell.-first").removeClass(t),e.addClass(t),_r_()}(t);var o=a.data("LightboxGallery");o&&o.pauseSlick&&o.pauseSlick(),y.trackEvent(y.hotelPageTracker,"Hotel: Lightbox closed","Click on close button"),_r_()})}function c(e,t){_i_("a9a:d669d1e3");var o=e.data("room-id"),a={customWrapperClassName:"hprt-lightbox--wrapper hprt-lightbox--two_column_layout",bOverflowVisible:!0,position:"dynamic",hideCallBack:C(e),trapFocus:!0};v.show(e,a);var n=e.find(".hprt-lightbox-gallery-container");if(n.length&&!n.hasClass("slicked")){n.addClass("slicked");var r=new x(n);e.data("LightboxGallery",r),n.find('[data-gallery=""]').one("click.tracking",function(){_i_("a9a:92bf8b2f"),u.goal("hp_lb_gallery_clicks_photo"),_r_()});var _=n.find(".hp-gallery-control");_.on("click.tracking",function(e){_i_("a9a:a6deb18a"),e.hasOwnProperty("originalEvent")&&(B.et.goal("hp_lb_gallery_clicks_arrows"),_.off("click.tracking")),_r_()}),n.find("a.js-hotel-thumb").one("mouseenter.tracking click.tracking",function(){_i_("a9a:a1138f74"),B.et.goal("hp_lb_gallery_used_thumbs"),_r_()}),j(e)}else(r=e.data("LightboxGallery"))&&r.playSlick&&r.playSlick(),n.length&&j(e);var i=e.find(".inline-feedback_lightbox");if(i.length){var s=0<e.find(".b-button_primary").length,l=parseInt(i.data("opened_count"));l?l+=1:l=1,i.data("opened_count",l),(2<l||!s)&&i.removeClass("g-hidden")}k.off("feedbackInline:close_lightbox").on("feedbackInline:close_lightbox",$);var c="ZdfbFUdJVTeSdZAeKe";e.find(".t-"+c).length&&(B.et.stage(c,1),B.et.stage(c,3));var h="ZdfbAeaDDGDQVaeeBZC";e.find(".t-"+h).length&&(B.et.stage(h,1),B.et.stage(h,3));var d="ZdfbaTaTaBPBdfYOOeWUAeZdBC";e.find(".t1-"+d).length&&(B.et.stage(d,1),B.et.stage(d,2)),e.find(".t2-"+d).length&&(B.et.stage(d,1),B.et.stage(d,3)),e.find(".t3-"+d).length&&B.et.stage(d,4),e.find(".t4-"+d).length&&B.et.stage(d,5);var b="ZdfbaTaTaBPBdfYOMLIKCedQHT";e.find(".t-"+b).length&&(B.et.stage(b,1),e.find(".t1-"+b).length&&B.et.stage(b,2),e.find(".t2-"+b).length&&B.et.stage(b,3));var p="ZdffQfQMNVJNFQJYKfPBDORe";e.find(".t-"+p).length&&B.et.stage(p,1),k.trigger(B.hotel.Events.RT.LIGHTBOX_OPEN_NEW,o,e);var m=g('a.hprt-roomtype-link[href="#RD'+o+'"]');if(0<m.length){var f=m.data("room-name");f&&y.trackEvent(y.hotelPageTracker,"Hotel: Lightbox opened",f)}w||isNaN(o)||(w=!0,g.ajax({method:"POST",dataType:"json",url:"/hotel_lightbox_opened",data:{hotel_id:B.env.b_hotel_id,room_id:o}})),_r_()}function $(){_i_("a9a:4fb8ca4d"),v.hide(),_r_()}o.exports=a.extend({init:function(e){_i_("a9a:6c4e526f");var t=this.$el,o=t.data("room-id");!function(e,t){_i_("a9a:9ee6bc0a");var o=i.parseUrl(location.href).query.activeTab;if(!o)return _r_();var a=o.match(/room_([0-9]*)_.*/);if(!a||a.length<2)return _r_();var n=a[1];if(!n)return _r_();e==n&&t(),_r_()}(o,function(){_i_("a9a:fd8b529b"),c(t),_r_()});var a=g('.hprt-roomtype-link[data-room-id="'+o+'"]');if(!a.length)return _r_();a.click(function(e){_i_("a9a:ee950b8a"),e.preventDefault(),c(t),_r_()});var n=g(".gr-toggle-room-lightbox");if(n.length)for(var r=0;r<n.length;r++)a.attr("href")===g(n[r]).attr("href")&&g(n[r]).bind("click",function(e){_i_("a9a:b20c48b2"),e.preventDefault(),c(t),_r_()});var _=g(".main-gallery-toggle-room-lightbox");if(_.length)for(r=0;r<_.length;r++)a.data("roomId")===g(_[r]).data("roomId")&&g(_[r]).bind("click",function(e){_i_("a9a:7d6ceceb"),e.preventDefault(),c(t,g(this).data("isGroupRecommendation")),_r_()});_r_()},show:c}),_r_()}),B.define("component/hotel/new-rooms-table/summary/best-price",function(e,t,o){_i_("a9a:7a12b733");var a=e("component"),n=e("hotel/store"),r=e("jstmpl"),_=/^bbasic_\d+$/i;o.exports=a.extend({init:function(){_i_("a9a:1784929d"),n.subscribe(function(){_i_("a9a:c8b3d25e");var e=n.getState().roomsTable.js_selection,t=$(".hp_rt_attr_msg");1==B.env.b_is_group_search?2==e.fitStatus?this.toggleJackpotMessage(e,t):this.$el.hide():this.toggleJackpotMessage(e,t),_r_()}.bind(this)),_r_()},toggleJackpotMessage:function(e,t){_i_("a9a:590aacd4");var o=_.test(e.blockIDs[0]||"");if(1!=e.roomCount||2!=e.blocks[e.blockIDs[0]].b_stay_prices.length||o)0<e.roomCount?(this.$el.text(B.jstmpl.translations("hp_rt_jackpot_best_price")),this.$el.show(),t.length&&t.show()):(this.$el.hide(),this.$el.text(""),t.length&&t.hide());else{var a="",n=e.roomTypes[0];-1!==["1","29","31","17","19","26"].indexOf(n)?(a="1"===n?r.translations("pss_rt_jackpot_last_room_dehotelise_apt"):"29"===n?r.translations("pss_rt_jackpot_last_room_dehotelise_hh"):"31"===n?r.translations("pss_rt_jackpot_last_room_dehotelise_villa"):r.translations("pss_rt_jackpot_last_room_dehotelise_option"),this.$el.text(a)):this.$el.text(B.jstmpl.translations("hp_rt_jackpot_last_room")),this.$el.show(),t.length&&t.show()}_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/breakfast-included",function(e,t,o){_i_("a9a:b5cd9c4d");var a=e("component"),n=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:2ae1bbf5"),n.subscribe(function(){_i_("a9a:6a73f9b8");var t=n.getState().roomsTable.js_selection;0<t.roomCount&&t.blockIDs.every(function(e){return _i_("a9a:f24b1574"),_r_("breakfast"===t.blocks[e].b_mealplan_included_name)})?this.$el.show():this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/no-free-cancellation",function(e,t,o){_i_("a9a:cb606598");var a=e("component"),l=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:e4464fb4"),l.subscribe(function(){_i_("a9a:8b82df2f");var o=l.getState().roomsTable.js_selection,e=o.blockIDs.reduce(function(e,t){return _i_("a9a:30295c20"),"non_refundable"===o.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0),t="NAREDUfZZGbCATANNWJcdPIHAdRKdPIHAEdaRO",a=B.et.track(t),n=$(".js-hprt__booking-summary__non-free-wrapper"),r=o.blockIDs.reduce(function(e,t){return _i_("a9a:3be4ddce"),"special_condition"===o.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0);if(o.blockIDs&&o.blockIDs.length&&B.et.stage(t,1),(0<r||0<e)&&B.et.stage(t,2),0<e&&B.et.stage(t,3),0<r&&B.et.stage(t,4),0<e||a&&0<r){var _=B.jstmpl.translations("sxp_hp_rt_no_free_cancellation_1"),i=B.jstmpl.translations("sxp_hp_rt_no_free_cancellation_3"),s=B.jstmpl.translations("sxp_hp_rt_no_free_cancellation_4");a&&(_=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body"),i=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free_with_free"),s=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free"),n.removeClass("g-hidden")),1===o.roomCount?this.$el.html(_):o.blockIDs.length-e!=0&&(!a||a&&o.blockIDs.length-e-r!=0)?this.$el.html(i):this.$el.html(s),$(".continue_header").removeClass("g-hidden"),this.$el.removeClass("g-hidden")}else $(".continue_header").addClass("g-hidden"),this.$el.addClass("g-hidden"),a&&n.addClass("g-hidden");_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/conditions",function(e,t,o){_i_("a9a:dd9643cd");var a=e("component"),n=e("hotel/store"),r=/^bbasic_\d+$/i;o.exports=a.extend({init:function(){_i_("a9a:e8aa97a0"),n.subscribe(function(){_i_("a9a:693c8bee");var e=n.getState().roomsTable.js_selection;if(1!==e.roomCount||e.blocks[e.blockIDs[0]].b_is_fflex_price_point||r.test(e.blockIDs[0]||""))this.$el.html("");else{var t=$('tr[data-block-id="'+e.blockIDs[0]+'"]').find(".hprt-conditions").clone();t.removeClass("hprt-conditions").addClass("hprt-conditions-summary"),t.find(".jq_tooltip").removeClass("jq_tooltip").removeAttr("data-title title"),t.find(".green_condition").removeClass("green_condition"),t.find(".hprt-green-condition").removeClass("hprt-green-condition"),t.find(".hprt-checkmark-condition").removeClass("hprt-checkmark-condition"),t.find(".hprt-special-condition").removeClass("hprt-special-condition"),e.blocks[e.blockIDs[0]].b_genius_free_room_upgrade&&t.find(".room-upgrade-condition").css("display","list-item"),this.$el.html("<div><strong>"+B.jstmpl.translations("bp_res_column_details")+"</strong>"+$("<div />").append(t).html()+"</div>")}_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/cta-ticker",function(e,t,o){_i_("a9a:204b61a9");var a=e("component"),n=e("jquery");o.exports=a.extend({init:function(){_i_("a9a:69a749bc");var e=this.$el.find("span"),t=0;setInterval(function(){_i_("a9a:2a47cb69"),n(e.get(t)).fadeOut("slow",function(){_i_("a9a:417af38a"),(t+=1)==e.length&&(t=0),n(e.get(t)).fadeIn("slow"),_r_()}),_r_()},7e3),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/reservation-cta",function(e,t,o){_i_("a9a:a788e437");var a=e("component"),n=e("et"),r=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:406616c8");var a=this.$el.find(".js-reservation-button");r.subscribe(function(){_i_("a9a:ab489b04");var t=r.getState().roomsTable.js_selection,e=t.blockIDs.some(function(e){return _i_("a9a:3c30249e"),_r_(t.blocks[e].b_rate_is_genius)}),o=t.blockIDs.filter(function(e){return _i_("a9a:e976fc2e"),_r_(t.blocks[e].b_genius_free_room_upgrade)});t.blockIDs.some(function(e){return _i_("a9a:261befd3"),_r_(t.blocks[e].b_business_package_match)})&&n.customGoal("VOffSLNULFHOHRCTeMeRGWLEcLcDOJaYO",2),t.blockIDs.some(function(e){return _i_("a9a:bd0710a9"),_r_(t.blocks[e].b_rate_is_cug_business_rate)})&&t.blockIDs.length<2&&(e=!1),o.length&&o.length===t.blockIDs.length?a.html(B.jstmpl.translations("genius_free_room_upgrade_rt_cta")):e?a.html(B.jstmpl.translations("ge_deepen_rt_book_genius_cta")):a.html(B.jstmpl.translations("hp_rt_book_button_reserve")),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/dont-worry",function(e,t,o){_i_("a9a:56755e0d");var a=e("component");o.exports=a.extend({init:function(){if(_i_("a9a:9aa1ad13"),this.$el.data("alwaysVisible"))return this.$el.text(B.jstmpl.translations("bp_dont_worry_message")),_r_();var o=e("hotel/store");o.subscribe(function(){_i_("a9a:d8ae6c1c");var t=o.getState().roomsTable.js_selection,e=t.blockIDs.every(function(e){return _i_("a9a:407283ae"),_r_(t.blocks[e].b_book_now_pay_later)});0<t.roomCount&&e?this.$el.text(B.jstmpl.translations("bp_dont_worry_message")):this.$el.text(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-challenge",function(e,t,o){_i_("a9a:724a462a");var a=e("component"),n=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:eb691259"),n.subscribe(function(){_i_("a9a:b41696e8"),n.getState().roomsTable.js_selection.roomCount?this.$el.show():this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/fade",function(e,t,o){_i_("a9a:0f09db2a");var r=e("server-data"),_=e("jquery"),a=e("component"),i=e("hotel/store"),s="hprt-block--genius-room-selected",l="hprt-block--room-selected";o.exports=a.extend({init:function(){_i_("a9a:e5671e30"),i.subscribe(function(){_i_("a9a:7d2e7ccc");var t=i.getState().roomsTable.js_selection;this.$el.removeClass(l),this.$el.removeClass(s),0<t.roomCount&&(t.blockIDs.some(function(e){return _i_("a9a:98245526"),_r_(1===t.blocks[e].b_rate_is_genius)})&&1===parseInt(r.brand_selected_rooms_genius)?this.$el.addClass(s):this.$el.addClass(l));var e=".roomType--highlight",o=_(".hprt-table").find(".hprt-table-cell.-first");if(o.length&&o.filter(e).length){var a=o.filter(e).find("[name^=RD]");if(a&&a.length&&t.roomIDs&&t.roomIDs.length){var n=a.attr("name").replace("RD","");n&&-1==t.roomIDs.indexOf(n)&&o.removeClass("roomType--highlight hprt-table-cell-roomtype--active")}}_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("template_reserve_button_tooltip",function(){_i_("a9a:9486d96b");var _,i=["\n    <div class='big_tooltip_x'>\n        <h1>","</h1>\n\n        <p>\n            <strong>\n                ","\n                    ",", ","\n                ","\n            </strong>\n            <br />\n        </p>\n\n        <hr/>\n\n        <p>\n            <strong>","/private/bp_dates_num_nights_1/name","</strong><br />\n        </p>\n\n        <p>\n            ","/private/check_in/name",": </span>","\n        </p>\n\n        <p>\n            ","/private/check_out/name","\n        </p>\n    </div>\n\n    <div class='big_tooltip_message'>\n        ","\n          ","/private/genius_free_room_upgrade_rt_applied/name","\n        ","\n            ","/private/ge_boost_hp_rt_reserve_button_hover_nongenius/name","/private/hp_rt_reserve_hover_no_account_2_minutes/name","\n    </div>\n\n    ",'\n            <div class="big_tooltip_message big_tooltip_message__green pay_later">\n                ',"/private/hp_rt_pay_at_property/name","\n            </div>\n        ","\n    ","\n\n"],s=["b_hotel_name","b_room_details","b_name","b_interval","b_checkin_localized_date_with_weekday","b_checkout_localized_date_with_weekday","b_only_genius_room_upgrade_selected","b_user_auth_level","b_all_rooms_have_pay_later","b_is_lightbox"];return _r_(function(e){_i_("a9a:31f6417f");var t="",o=this.fn;t+=[i[0],o.F.html(o.MC(s[0])),i[1]].join("");var a=o.MC(s[1])||[];e.unshift(null);for(var n=1,r=a.length;n<=r;n++)e[0]=a[n-1],t+=[i[2],o.F.html(o.MC(s[2]))].join(""),o.MJ(n==a.length)||(t+=i[3]),t+=i[4];return e.shift(),t+=[i[5],(e.unshift({num_nights:o.MC(s[3])}),_=o.ME(i[6],o.MB,o.MN,o.MO(o.MC(s[3]),null,i[6])),e.shift(),_),i[7],o.ME(i[8],o.MB,o.MN,null),i[9],o.F.maybexss(o.MC(s[4])),i[10],o.ME(i[11],o.MB,o.MN,null),i[9],o.F.maybexss(o.MC(s[5])),i[12]].join(""),o.MD(s[6])?t+=[i[13],o.ME(i[14],o.MB,o.MN,null),i[15]].join(""):o.MD(s[7])?t+=[i[16],o.ME(i[17],o.MB,o.MN,null),i[15]].join(""):t+=[i[16],o.ME(i[18],o.MB,o.MN,null),i[15]].join(""),t+=i[19],o.MK(o.MC(s[9]))&&(t+=i[15],o.MD(s[8])&&(t+=[i[20],o.ME(i[21],o.MB,o.MN,null),i[22]].join("")),t+=i[23]),t+=i[24],_r_(t)})}()),B.define("hotel/rooms-table/reserve-button-tooltip",function(e){_i_("a9a:416d8256");var t=e("jquery"),r=e("hotel/store"),_=t(".js-reservation-button"),i=_.attr("data-title"),s=B.jstmpl("template_reserve_button_tooltip"),l={};r.subscribe(function(){_i_("a9a:65823554");var t=r.getState().roomsTable.js_selection,e=t.roomIDs.map(function(e){return _i_("a9a:ac8eb076"),_r_(t.rooms[e])}),o=t.blockIDs.filter(function(e){return _i_("a9a:d56c8c4a"),_r_(t.blocks[e].b_genius_free_room_upgrade)}),a=o.length&&o.length===t.blockIDs.length;if(_.removeAttr("id").removeAttr("data-tooltip-class"),0<t.roomCount){l={b_hotel_name:B.env.b_hotel_name,b_interval:B.env.b_checkin_checkout_interval,b_checkin_localized_date_with_weekday:B.formatter.date(B.env.b_checkin_date,"date_with_weekday"),b_checkout_localized_date_with_weekday:B.formatter.date(B.env.b_checkout_date,"date_with_weekday"),b_check_in_time_translated:B.env.b_check_in_time_translated,b_check_out_time_translated:B.env.b_check_out_time_translated,b_room_details:e,b_user_auth_level:B.env.auth_level,b_only_genius_room_upgrade_selected:a};var n=s.render(l);_.attr("data-title",n).attr("data-tooltip-class","submit_holder_button_tooltip")}else l={},_.attr("data-title",i);_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/rooms",function(e,t,o){_i_("a9a:c8f42e99");var a=e("component"),n=e("hotel/utils/rooms-selected-copy"),r=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:86d028d5"),r.subscribe(function(){_i_("a9a:39ad99ac");var e=r.getState().roomsTable.js_selection;0<e.roomCount?(this.$el.html(n(e.roomTypes,e.roomCount)+' <div class="hprt-reservation-total-price">'+e.totalPriceFormatted+"</div>"),this.$el.show()):this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-facilities",function(e,t,o){_i_("a9a:9582ceac");var a=e("component"),n=e("et");o.exports=a.extend({init:function(){_i_("a9a:c0bc5b9e"),this.$otherFacilities=this.$el.find(".hprt-facilities-others"),this.$accessibleFacilities=this.$el.find(".hprt-accessible-facilities"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:a9f775ec");var o=this.$otherFacilities,t=this.$accessibleFacilities;this.$el.on("click","[data-toggler]",function(e){_i_("a9a:49f30bd4"),e.preventDefault();var t=$(e.target);o.toggle("fast",function(){_i_("a9a:a56d8101"),o.is(":visible")?(n.goal("hp_room_facilities_more"),t.text(B.jstmpl.translations("hp_rt_info_collapse"))):(n.goal("hp_room_facilities_less"),t.text(B.jstmpl.translations("hp_rt_loc_more"))),_r_()}),_r_()}),this.$el.on("click","[data-toggler-accessibility]",function(e){_i_("a9a:a210caab"),e.preventDefault(),$(e.currentTarget).toggleClass("accordion-open",!t.is(":visible")),t.toggle("fast"),$(e.currentTarget).blur(),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-error-tooltip",function(e,t,o){_i_("a9a:acae9003");var a=e("component"),n=e("jquery"),r=e("hotel/store"),_=e("hotel/redux/actionTypes");o.exports=a.extend({init:function(){_i_("a9a:6270e865");var o=this.$el,a=n(".hprt-nos-select");o.attr("role","alert"),n("#hprt-form").submit(function(e){if(_i_("a9a:9b0552f8"),!r.getState().roomsTable.js_selection.roomCount){e.preventDefault();var t=a.filter(function(e,t){return _i_("a9a:92d8eed6"),_r_(60<t.getBoundingClientRect().top)}).get(0)||a.get(0);o.insertAfter(t),o.show().animate({opacity:1},600),n(".hprt-table-room-select").addClass("hprt-table-cell-select-error"),window.setTimeout(function(){_i_("a9a:645d91c7"),o.animate({opacity:0},600,function(){_i_("a9a:250ddeae"),o.hide(),_r_()}),_r_()},4e3),r.dispatch({type:_.SELECT_ROOM_ERROR}),n("select[name^='nr_rooms_']").attr("disabled",!1)}_r_()}),r.subscribe(function(){_i_("a9a:45872291"),r.getState().roomsTable.js_selection.roomCount&&n(".hprt-table-cell-select-error").removeClass("hprt-table-cell-select-error"),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-rooms",function(e,t,o){_i_("a9a:af98005c");var a=e("component"),n=e("hotel/redux/actionTypes"),l=e("et"),c=e("hotel/store"),h=e("component/hotel/new-rooms-table/fit-status"),d=e("jquery");o.exports=a.extend({init:function(){_i_("a9a:a43f1894");var r=this.$el,_=r.data("room-id"),i=r.data("block-id"),s=r.parents("tr").find("td").not(":first");r.on("change",function(){var e;_i_("a9a:8e8c8433"),e="1"===r.attr("data-is-fflex-selected")?r.attr("data-other-block-id"):r.attr("data-block-id"),c.dispatch({type:n.SELECT_ROOM,block_id:e,number_of_rooms:parseInt(r.val(),10),is_fflex_selected:r.attr("data-is-fflex-selected")}),1==B.env.b_is_group_search&&h.update(),_r_()}),c.subscribe(function(){_i_("a9a:086922b2");var e=c.getState().roomsTable.js_selection;0<e.roomCount?(l.goal("hp_room_select"),203==+B.env.b_acc_type&&l.goal("hp_hostel_room_select")):0<e.nrSelections&&(l.goal("hp_rt_room_deselect"),203==+B.env.b_acc_type&&l.goal("hp_rt_hostel_room_deselect")),i=r.attr("data-block-id");var t=e.blocks[i];t?(r.val(t.js_nr_selected),t.js_is_highlighted?s.addClass("hprt-block--room-selected"):s.removeClass("hprt-block--room-selected")):s.removeClass("hprt-block--room-selected");var o=e.rooms[_];if(o&&o.b_has_room_inventory){var a=parseInt(r.val(),10),n=parseInt(o.b_blocks[0].b_nr_stays,10)+a-e.roomCountPerRoomID[o.b_id];r.find("option").each(function(){_i_("a9a:4182cbe4"),d(this).prop("disabled",this.value>n),_r_()})}else r.find("option").each(function(){_i_("a9a:759347dd"),d(this).prop("disabled",!1),_r_()});_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table",function(e){_i_("a9a:de95e8e7");var i=e("jquery"),s=e("hotel/store"),a=e("booking-sticker"),t=!1;function o(){_i_("a9a:59856d90");var e=new a,t=new a,o={};B.env.b_hp_sticky_offset&&(o.initialOffset=B.env.b_hp_sticky_offset),e.init(".hprt-table thead",".hprt-table",o),t.init(".hprt-table-cell.-last > .hprt-block",".hprt-table-cell.-last",o),_r_()}"hotel"===B.env.b_action&&B.env.b_bookings_owned&&B.env.b_rooms_available_and_soldout&&(0<i(".hprt-table tbody tr").length&&(o(),s.subscribe(function(){_i_("a9a:86af2c2c"),window.setTimeout(a.update,5),window.setTimeout(a.update,10),_r_()}),2===a.stickedElements.length&&(t=!0)),B.events.on("main-tab-opened",function(){_i_("a9a:f36067cd"),t||o(),_r_()})),e("hotel/rooms-table/reserve-button-tooltip"),i("#hprt-form").submit(function(e){var t;_i_("a9a:14d8f73f");var o=s.getState();if(!o.roomsTable.js_selection.roomCount||!o.roomsTable.rooms)return _r_();t=[];for(var a=[],n=0;n<o.roomsTable.rooms.length;n++){for(var r=-1,_=0;_<o.roomsTable.rooms[n].b_blocks.length;_++)o.roomsTable.js_selection.blocks[o.roomsTable.rooms[n].b_blocks[_].b_block_id]&&(r=_);o.roomsTable.rooms[n].b_blocks.some(function(e){return _i_("a9a:ceecf64c"),_r_(o.roomsTable.js_selection.blocks[e.b_block_id])})&&t.push(n+1),-1!=r&&a.push(r+1)}t.length&&i(this).find("input[name=rt_pos_selected]").val(t.join("_")),a.length&&i(this).find("input[name=rt_pos_selected_within_room]").val(a.join("_")),i("select[name^='nr_rooms_']").filter(function(){return _i_("a9a:5b49b831"),_r_(0==i(this).val())}).attr("disabled",!0),_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-room-upgrade",function(e,t,o){_i_("a9a:6ad09232");var a=e("component"),n=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:2de5899f"),n.subscribe(function(){_i_("a9a:fb397e50");var e=n.getState().roomsTable.js_selection,o=0,a=0;1<=e.roomCount?($.each(e.blocks,function(e,t){_i_("a9a:36f29bce"),t.b_genius_free_room_upgrade?o=1:a=1,_r_()}),o&&a?this.$el.html('<div class="urgency_message_red"><strong>'+B.jstmpl.translations("genius_free_room_upgrade_rt_multiple")+"</strong></div>"):this.$el.html("")):this.$el.html(""),_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("js_hprt_select_room_options",function(){_i_("a9a:fe0d59a0");var i=["\n    ",'\n    <option value="','">\n\n        ',"\n        ","\n            ","\n                &nbsp;\n            ","\n            &nbsp;&nbsp;&nbsp;\n            (",")\n        ","\n    </option>\n","\n\n","\n"],s=["fe_hprt_block"];return _r_(function(r){_i_("a9a:47851c1f");var e="",_=this.fn;return e+=i[0],r.unshift({fe_hprt_block:_.MB(s[0])}),e=function(e){_i_("a9a:ca701081");var t=(_.MC(s[0])||{}).b_stay_prices||[];r.unshift({fe_stay_price:null});for(var o,a=1,n=t.length;a<=n;a++)r[0].fe_stay_price=o=t[a-1],e+=[i[1],_.F.entities((o||{}).b_stays),i[2],_.F.maybexss((o||{}).b_stays),i[3]].join(""),_.MJ(o.b_price)&&(e+=i[4],_.MJ(o.b_price<10)&&(e+=i[5]),e+=[i[6],_.F.maybexss((o||{}).b_price),i[7]].join("")),e+=i[8];return r.shift(),e+=i[9],_r_(e)}(e),r.shift(),e+=i[10],_r_(e)})}()),B.require(["jquery","hotel/store","jstmpl"],function(_,i,e){_i_("a9a:59a9458d");var s=e("js_hprt_select_room_options");_("input.flexibility-upgrade").on("change",function(){_i_("a9a:81c09be0");var e=_(this).attr("data-other-block-id"),t=_("select[name='nr_rooms_"+e+"']"),o=t.val();_(this).hasClass("flexible-policy")?(t.attr("data-is-fflex-selected","1"),B.et.customGoal("ZcSIcceNJVTZNZGIGGYBC",3)):t.attr("data-is-fflex-selected","0");var a=_(this).val();t.attr("name","nr_rooms_"+a),t.attr("data-block-id",a),t.attr("data-other-block-id",e);var n,r=(n=i.getState().roomsTable.rooms,_i_("a9a:2a948a92"),_r_(n.reduce(function(t,e){return _i_("a9a:7dbc50af"),e.b_blocks.forEach(function(e){_i_("a9a:c171c2a0"),(t[e.b_block_id]=e).b_fflex_block&&(t[e.b_fflex_block.b_block_id]=e.b_fflex_block),_r_()}),_r_(t)},{})));t.html(s.render({fe_hprt_block:r[a]})),t.val(o),t.trigger("change"),_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-row",function(e,t,o){"use strict";_i_("a9a:d0c7e6e3"),booking.jstmpl("hprt_row_highlight_block",function(){_i_("a9a:a040dad5");var n,r=["\n        ",'\n<div class="hprt-table-cell__highlight-border">\n\t<div class="hprt-table-cell__highlight-block">\n\t\t\n\t\t<span class="hprt-table-cell__highlight-block-logo">\n\t\t\t',"iconset/briefcase","small","\n\t\t</span>\n\n\t\t\n\t\t","\n\t\t\n\t\t\n\t\t",'\n\t\t\t<span\n\t\t\t\tclass="hprt-table-cell__highlight-block-info"\n\t\t\t\tdata-component="tooltip"\n\t\t\t\tdata-tooltip-text="','"\n\t\t\t>\n\t\t\t\t',"iconset/info_sign","medium","\n\t\t\t<span>\n\t\t","\n\t</div>\n</div>\n","\n    "],_=["fe_content","fe_tooltip"];return _r_(function(e){_i_("a9a:649cbefb");var t,o="",a=this.fn;return o+=r[0],t=o,_i_("a9a:def65416"),t+=[r[1],(e.unshift({name:r[2],size:r[3]}),n=a.HELPER("icon",e[0]),e.shift(),n),r[4],a.F.maybexss(a.MC(_[0])),r[5]].join(""),a.MD(_[1])&&(t+=[r[6],a.F.maybexss(a.MC(_[1])),r[7],(e.unshift({name:r[8],size:r[9]}),n=a.HELPER("icon",e[0]),e.shift(),n),r[10]].join("")),t+=r[11],o=_r_(t),o+=r[12],_r_(o)})}());var a=e("component"),n=e("jstmpl"),r=e("jquery");o.exports=a.extend({init:function(){_i_("a9a:5d87ca8d");var e=this;e.$cells=e.$el.find(".js--hprt-table-cell-highlight"),e.createHighlightBlock(),e.$cells.first().prepend(e.$highlightBlock),setTimeout(function(){_i_("a9a:eaf7770f"),e.$cells.addClass("hprt-table-cell--highlight-block-active"),_r_()},1),_r_()},createHighlightBlock:function(){_i_("a9a:7b0d06b2");var e=0;this.$cells.each(function(){_i_("a9a:d90932a2"),e+=r(this).outerWidth(),_r_()}),this.$highlightBlock||(this.$highlightBlock=r(n("hprt_row_highlight_block").render({fe_content:this.$el.data("highlight-content"),fe_tooltip:this.$el.data("highlight-tooltip")})).loadComponents()),this.$highlightBlock.css({width:e}),_r_()}}),_r_()}),B.require("hotel/rooms-table"),_r_();